# Welcome to Bonita BPM Community edition WildFly bundle

I. Installation: basic configuration + first start
An H2 database is embedded in the bundle for early project testing (it is not suitable for production environments).
You can install and start the bundle with H2 (A), or install and start directly on your database (B).

  A. Install with embedded H2 database 
1. Run start-bonita.sh (Unix) or start-bonita.bat (Windows) to launch the Bonita BPM Community WildFly bundle.
2. Verify that Bonita BPM is up and running by accessing the login page at (http://localhost:8080/bonita)
You will still be able to switch to another database vendor later on.

  B. Install with connection to an external database
Pre-requisites
     1. Create your database
     2. Customize it so it's ready to work with Bonita BPM (check the documentation site)

Installation
     1. Edit the file setup/database.properties: set the database values to point to your existing database
     2. If you use Microsoft SQL Server or Oracle database, copy your database drivers in setup/lib folder; else, you're all set
     3. Run start-bonita.sh (Unix) or start-bonita.bat (Windows) to launch the Bonita BPM Community WildFly bundle
     4. Verify that Bonita BPM is up and running by accessing the login page at (http://localhost:8080/bonita)


II. Advanced bundle configuration (can be done before or after the first start)
You must not configure WildFly files directly anymore.
If you decide to do it anyway, your custom values will be overwritten by the templates used by Bonita BPM.
If you need to finely tune the configuration, modify the following template file:
    setup/wildfly-templates/standalone.xml
It is used as a basis for WildFly configuration and will overwrite WildFly provided file.


III. Database vendor change after first start
This works to switch from any DB vendor (including H2) to any other DB vendor.
     1. Edit the file setup/database.properties: change the database values to suit your needs
     2. If you switch to Microsoft SQL Server or Oracle database, copy your database drivers in setup/lib folder; else, you're all set
     3. Run start-bonita.sh (Unix) or start-bonita.bat (Windows) to launch the Bonita BPM Community WildFly bundle
Note that this switch is not a migration: the new database will be initialized and left empty for a fresh start.


IV. Bonita BPM internal configuration update
You may need to change the configuration of Bonita BPM platform, like the Technical user's credentials on your tenant.  
To do so:
     1. Stop Bonita BPM Community WildFly bundle
     2. In setup/ folder, run `setup(.sh|.bat) pull` to retrieve your current configuration from database
     3. Edit any configuration file in setup/platform_conf/current folder. 
        Example of frequently customized files:
       - setup/platform_conf/current/tenants/1/tenant_engine/bonita-tenant-community-custom.properties
       - setup/platform_conf/current/platform_engine/bonita-platform-community-custom.properties
     4. Run `setup(.sh|.bat) push` to push the new configuration to the database
     5. Restart the Bonita BPM Community WildFly bundle so the new configuration is taken into account


V. FAQ
My Microsoft SQL Server or Oracle database drivers do not seem to be taken into account when I put them in setup/lib folder?
=> The driver file must respect some naming convention.
For Microsoft SQL Server, rename it so that the name contains at least the word "sqlserver" or "sqljdbc" (case insensitive)
For Oracle, rename it so that the name contains at least the word "oracle" or "ojdbc" (case insensitive)

When I run on H2, why do I get prompted at each start to confirm that I want to use H2?
=> H2 is not recommended for production purposes, but only in development/testing environments.
To make sure you run in such environments, you are asked to confirm.
