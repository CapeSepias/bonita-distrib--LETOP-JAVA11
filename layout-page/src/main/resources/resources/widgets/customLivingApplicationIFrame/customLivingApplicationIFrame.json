{"designerVersion":"1.0.0-SNAPSHOT","id":"customLivingApplicationIFrame","name":"livingApplicationIFrame","lastUpdate":1430377788080,"template":"\n<iframe id=\"livingAppIFrame\" width=\"100%\" height=\"{{properties.contentHeight}}\" style=\"border: 0\" ng-src=\"{{ctrl.getSrc()}}\"></iframe>","controller":"function WidgetlivingApplicationIFrameController($scope, $http, $window) {\n    var ctrl = this;\n    \n    var pathArray = $window.location.pathname.split( '/' ); \n    ctrl.applicationToken =  pathArray[pathArray.length-2]; \n    ctrl.pageToken =  pathArray[pathArray.length-1];\n    ctrl.queryString = $window.location.search.substring(1);\n    \n    function getApplication() {\n        return $http.get('../../API/living/application?c=1&f=token%3D'+ctrl.applicationToken);\n    }\n   \n    function getTargetedApplicationPage(applicationId) {\n        $http.get('../../API/living/application-page?c=1&f=token%3D'+ctrl.pageToken+'&f=applicationId%3D'+applicationId+'&d=pageId')\n            .success(function(data) { \n                ctrl.customPageToken = data[0].pageId.urlToken;\n            });\n    }\n\n    getApplication().then(function(response) {\n        var application = response.data[0];\n        ctrl.applicationId = application.id;\n        return application.id;\n    }).then(getTargetedApplicationPage);\n     \n    ctrl.getSrc = function(){\n        return '/bonita/portal/custom-page/'+ctrl.customPageToken+'/?applicationId='+ctrl.applicationId+'&'+ctrl.queryString;\n    };\n    \n}","description":"IFrame to display the pages targeted by the LivingApplicationMenu.","custom":true,"properties":[{"label":"iframe size","name":"contentHeight","type":"text","defaultValue":"700px;","bidirectional":false}]}