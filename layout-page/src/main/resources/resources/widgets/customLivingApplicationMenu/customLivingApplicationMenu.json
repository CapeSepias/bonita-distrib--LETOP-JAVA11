{"designerVersion":"1.0.0-SNAPSHOT","id":"customLivingApplicationMenu","name":"livingApplicationMenu","lastUpdate":1430378118513,"template":"<div class=\"navbar navbar-inverse\" role=\"navigation\">\n      <div class=\"container\">\n         <div class=\"container\">  \n\t\t\t<div class=\"navbar-header\">\n\t\t\t\t<a class=\"navbar-brand\">{{ctrl.applicationName}}</a>\n\t\t        <button type=\"button\" ng-init=\"navCollapsed = true\" ng-click=\"navCollapsed = !navCollapsed\" class=\"navbar-toggle\">\n                   <span class=\"icon-bar\"></span>\n                   <span class=\"icon-bar\"></span>\n                   <span class=\"icon-bar\"></span>\n                </button>\n\t\t\t</div>\n\t\t\t<div collapse=\"navCollapsed\" class=\"collapse navbar-responsive-collapse navbar-collapse\">\n\t\t      <ul class=\"nav navbar-nav\">\n\t\t\t\t<li ng-class=\"{active:ctrl.pageToken===menu.applicationPageId.token}\" ng-repeat=\"menu in ctrl.applicationMenuList | filter:{parentMenuId:-1}\" dropdown>\n\t\t\t\t\t<a ng-if=\"!ctrl.hasChildren(menu)\" href=\"{{menu.applicationPageId.token}}\" >{{menu.displayName}}</a>            \n\t\t\t\t    <a ng-if=\"ctrl.hasChildren(menu)\" dropdown-toggle>{{menu.displayName}}<span class=\"caret\"></span></a>\n\t\t\t\t    <ul ng-if=\"ctrl.hasChildren(menu)\" class=\"dropdown-menu\">\n\t\t\t\t\t\t<li ng-repeat=\"childrenMenu in ctrl.applicationMenuList | filter:{parentMenuId:menu.id}\">\n\t\t\t\t\t\t\t<a href=\"{{childrenMenu.applicationPageId.token}}\">{{childrenMenu.displayName}}</a>\n\t\t\t\t\t\t</li>\n\t\t\t\t    </ul>\n\t\t\t\t</li>\n\t\t\t   </ul>\n\t\t    </div>\n\t    </div>\n    </div>\n</div>\n","controller":"function WidgetlivingApplicationMenuController($scope, $http, $window) {\n    var ctrl = this;\n    \n    var pathArray = $window.location.pathname.split( '/' ); \n    ctrl.applicationToken =  pathArray[pathArray.length-2]; \n    ctrl.pageToken =  pathArray[pathArray.length-1];\n\n    function getApplication() {\n        return $http.get('../../API/living/application?c=1&f=token%3D'+ctrl.applicationToken);\n    }\n   \n    function getApplicationMenuList(applicationId) {\n        $http.get('../../API/living/application-menu?c=100&f=applicationId%3D'+applicationId+'&d=applicationPageId&o=menuIndex+ASC')\n            .success(function(data) { \n                ctrl.applicationMenuList = data;\n            });\n    }\n\n    ctrl.hasChildren= function(menu) {\n        var children = ctrl.applicationMenuList.filter(function(currentMenu){return currentMenu.parentMenuId===menu.id});\n        return children.length > 0;\n    };\n    \n    getApplication().then(function(response) {\n        var application = response.data[0];\n        ctrl.applicationName = application.displayName;\n        return application.id;\n    }).then(getApplicationMenuList);\n}","description":"This is an example of living application menu.","custom":true,"properties":[]}